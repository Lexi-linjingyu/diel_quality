library(readr)
library(dplyr)
library(stringr)
library(tidyr)
library(naniar)
library(lubridate)

selectSet <- readr::read_csv("F:/wangjinz/lexi/diel_quality/chinawater/selectSet.csv")

#### 1. data cleaning ####

# change data into numeric data
selectSet$NH4 <- as.numeric(selectSet$NH4)
selectSet$TN <- as.numeric(selectSet$TN)

# get rid of the first column and remove duplicated rows###
non_dup <- selectSet %>% 
  select(-...1) %>% 
  distinct() %>% 
  drop_na() 

#change data
non_dup$DATE <-ymd(non_dup$DATE)

#### 2. Add lon lat for each province ####

library(leafletCN)
library(leaflet)
library(readr)
library(tidyverse)
library(rgeos) # gCentroid()
dat <-  data.frame(name = regionNames("china"), # regionNames??????????????????
                   value = runif(34))
# geojsonMap?????????value?????????????????????????????????
geojsonMap(dat, mapName = "china") 
# ????????????
prov_path <- system.file("geojson/china.json", package = "leafletCN")
# ???read.geoShape()?????????geojson???????????????SpatialPolygonsDataFrame??????,????????????
prov_map <- read.geoShape(prov_path)
# ??????????????????????????????(??????sp?????????????????????)
prov_data <- prov_map@data
head(prov_data) 
str(prov_data) # ?????????34???,???34???????????????

 
